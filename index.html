<!DOCTYPE html>
<html lang="en" dir="ltr">

<!╌ https://opentdb.com/api.php?amount=1╌>

  <head>
    <meta charset="utf-8">
    <title>Keegan's Trivia</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="custom_styles.css">
    <script src="https://cdn.jsdelivr.net/npm/kute.js@2.2.4/dist/kute.min.js"></script>
  </head>

  <body>
    <div class="streak">
      <h3>Current Streak: </h3>
      <p id="cur_streak">0</p>
    </div>
    <p class="cur_answer">test</p>
    <div class="top-border">
      <svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
        <path d="M1200 120L0 16.48 0 0 1200 0 1200 120z" class="shape-fill"></path>
      </svg>
    </div>
    <div class="container top-right-text">

    </div>
    <div class="container top-left-text">
      <h1>Quizz Buzz</h1>
      <p>Welcome to Quiz Buzz, my first ever interactive website. Inspired by the world renound Trivia Crack, I wanted to make something similar. Good luck and have fun!</p>
      <button class="button-53" type="button" name="button" onclick="getTrivia()">Generate Random Question!</button>
    </div>
    <div class="container bottom-text">
      <div id="popup" class="stamp">
        <h3 class="is-correct"></h3>
      </div>
      <p id="question">Please select the question generator button!</p>
      <table>
        <tr class="answers">
          <td>
            <button id='btn-A' class="button-53" type="button" name="button" onclick="isCorrect(this)" value="">Answer A</button>
          </td>
          <td>
            <button id='btn-B' class="button-53" type="button" name="button" onclick="isCorrect(this)" value="">Answer B</button>
          </td>
        </tr>
        <tr class="answers">
          <td>
            <button id='btn-C' class="button-53" type="button" name="button" onclick="isCorrect(this)" value="">Answer C</button>
          </td>
          <td>
            <button id='btn-D' class="button-53" type="button" name="button" onclick="isCorrect(this)" value="">Answer D</button>
          </td>
        </tr>
      </table>
    </div>
    <svg class="top-blob" id="visual" viewBox="0 0 900 600" width="900" height="600" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">

      <g transform="translate(456.60604596908786 261.9359086000752)">
        <path id="blob1"
          d="M125.8 -115.2C169.2 -82.5 214.6 -41.2 224.1 9.5C233.7 60.3 207.3 120.7 164 170.3C120.7 220 60.3 259 12.5 246.5C-35.4 234 -70.7 170 -120.7 120.4C-170.7 70.7 -235.4 35.4 -239.1 -3.8C-242.9 -42.9 -185.8 -85.8 -135.8 -118.5C-85.8 -151.1 -42.9 -173.6 -0.8 -172.7C41.2 -171.9 82.5 -147.8 125.8 -115.2"
          fill="#11c497"></path>
      </g>
      <g transform="translate(443.89302130399693 343.14854829477247)" style="visibility: hidden">
        <path id="blob2"
          d="M179.2 -184.4C224 -134.4 246.5 -67.2 230.6 -15.9C214.7 35.4 160.4 70.7 115.5 100.4C70.7 130 35.4 154 -12.3 166.3C-59.9 178.5 -119.7 179.1 -161.6 149.4C-203.4 119.7 -227.2 59.9 -223 4.2C-218.7 -51.4 -186.4 -102.8 -144.6 -152.8C-102.8 -202.8 -51.4 -251.4 7.9 -259.3C67.2 -267.2 134.4 -234.4 179.2 -184.4"
          fill="#11c497"></path>
      </g>
    </svg>
    <svg class="bottom-blob" id="visual" viewBox="0 0 900 600" width="900" height="600" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">

      <g transform="translate(474.6287248768832 298.9524959909487)">
        <path id="blob3"
          d="M145.4 -135.8C180.1 -110.8 194.1 -55.4 188.9 -5.2C183.7 45 159.4 90 124.7 118.5C90 147 45 159 3.3 155.7C-38.4 152.4 -76.8 133.8 -126.8 105.3C-176.8 76.8 -238.4 38.4 -239.2 -0.8C-240.1 -40.1 -180.1 -80.1 -130.1 -105.1C-80.1 -130.1 -40.1 -140.1 7.7 -147.7C55.4 -155.4 110.8 -160.8 145.4 -135.8"
          fill="#611d87"></path>
      </g>
      <g transform="translate(418.28359529566745 263.6040268446729)" style="visibility: hidden">
        <path id="blob4"
          d="M183.3 -166.4C225.1 -141.4 238 -70.7 237.7 -0.4C237.3 70 223.7 140 181.8 188C140 236 70 262 15.1 246.9C-39.8 231.8 -79.7 175.7 -110.3 127.7C-141 79.7 -162.5 39.8 -170.7 -8.2C-179 -56.3 -174 -112.7 -143.3 -137.7C-112.7 -162.7 -56.3 -156.3 7.2 -163.5C70.7 -170.7 141.4 -191.4 183.3 -166.4"
          fill="#611d87"></path>
      </g>
    </svg>

    <div class="bottom-border">
      <svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
        <path d="M1200 120L0 16.48 0 0 1200 0 1200 120z" class="shape-fill"></path>
      </svg>
    </div>



    <script>
      const top_tween = KUTE.fromTo(
        '#blob1', {
          path: '#blob1'
        }, {
          path: '#blob2'
        }, {
          repeat: 999,
          duration: 3000,
          yoyo: true
        }
      )
      const bottom_tween = KUTE.fromTo(
        '#blob3', {
          path: '#blob3'
        }, {
          path: '#blob4'
        }, {
          repeat: 999,
          duration: 3000,
          yoyo: true
        }
      )
      top_tween.start()
      bottom_tween.start()
      const url = 'https://opentdb.com/api.php?amount=1'

      function randomIntFromInterval() {
        return Math.floor(Math.random() * (4 - 1 + 1) + 1)
      }

      function sleep(milliseconds) {
        var start = new Date().getTime();
        for (var i = 0; i < 1e7; i++) {
          if ((new Date().getTime() - start) > milliseconds) {
            break;
          }
        }
      }

      function isCorrect(btn) {
        if (btn.innerText == document.getElementsByClassName('cur_answer').innerText) {
          alert('Correct!');
          var temp = parseInt(document.getElementById('cur_streak').innerText);
          temp ++;
          document.getElementById('cur_streak').innerText = temp.toString();
          getTrivia();

        }
        else {
          alert('Incorrect!');
          document.getElementById('cur_streak').innerText = '0';
          getTrivia();
        }
      }

      async function getTrivia() {
        var btn_dict = {
          1: 'btn-A',
          2: 'btn-B',
          3: 'btn-C',
          4: 'btn-D'
        }
        let response = await fetch(url);
        let data = await response.json();
        if (data['results'][0]['type'] == 'boolean') {
          document.getElementById('btn-C').style.visibility = 'hidden';
          document.getElementById('btn-D').style.visibility = 'hidden';
          document.getElementById('question').innerText = data['results'][0]['question']?.replace(/&quot;/g, '"').replace(/&#039;/g, "'").replace(/&ouml;/g, 'ö').replace(/&amp;/g, "&");
          var temp = randomIntFromInterval();
          var right_answer = btn_dict[temp];
          delete btn_dict[temp];
          var remaining_btns = Object.keys(btn_dict);
          var wrong_answers = data['results'][0]['incorrect_answers'];
          document.getElementById(right_answer).innerText = data['results'][0]['correct_answer']?.replace(/&quot;/g, '"').replace(/&#039;/g, "'").replace(/&ouml;/g, 'ö').replace(/&amp;/g, "&");
          document.getElementsByClassName('cur_answer').innerText = data['results'][0]['correct_answer']?.replace(/&quot;/g, '"').replace(/&#039;/g, "'").replace(/&ouml;/g, 'ö').replace(/&amp;/g, "&");
          for (var i = 0; i < remaining_btns.length; i++) {
            var wrong_answer = wrong_answers[i];
            document.getElementById(btn_dict[remaining_btns[i]]).innerText = wrong_answer?.replace(/&quot;/g, '"').replace(/&#039;/g, "'").replace(/&ouml;/g, 'ö').replace(/&amp;/g, "&");
          }
        } else {
          document.getElementById('btn-C').style.visibility = 'visible';
          document.getElementById('btn-D').style.visibility = 'visible';
          document.getElementById('question').innerText = data['results'][0]['question']?.replace(/&quot;/g, '"').replace(/&#039;/g, "'").replace(/&ouml;/g, 'ö').replace(/&amp;/g, "&");
          var temp = randomIntFromInterval();
          var right_answer = btn_dict[temp];
          delete btn_dict[temp];
          var remaining_btns = Object.keys(btn_dict);
          var wrong_answers = data['results'][0]['incorrect_answers'];
          document.getElementById(right_answer).innerText = data['results'][0]['correct_answer']?.replace(/&quot;/g, '"').replace(/&#039;/g, "'").replace(/&ouml;/g, 'ö').replace(/&amp;/g, "&");
          document.getElementsByClassName('cur_answer').innerText = data['results'][0]['correct_answer']?.replace(/&quot;/g, '"').replace(/&#039;/g, "'").replace(/&ouml;/g, 'ö').replace(/&amp;/g, "&");
          for (var i = 0; i < remaining_btns.length; i++) {
            var wrong_answer = wrong_answers[i];
            document.getElementById(btn_dict[remaining_btns[i]]).innerText = wrong_answer?.replace(/&quot;/g, '"').replace(/&#039;/g, "'").replace(/&ouml;/g, 'ö').replace(/&amp;/g, "&");
          }
        }

      }
    </script>
  </body>

</html>
